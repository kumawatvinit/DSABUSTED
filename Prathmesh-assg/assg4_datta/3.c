#include <stdio.h>

#define MAX_VERTICES 1000

int lkpilplkpilkpikiokoio[MAX_VERTICES][MAX_VERTICES];
int vgfvgfgfgfvvbfvbhbv[MAX_VERTICES];

void DepthFirstTraversal(int kjyjyji990, int fhfbfrubbfvinvk)
{
    int dsrdsdrdsdsrwsr = 0;
    vgfvgfgfgfvvbfvbhbv[kjyjyji990] = 1;

    for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
    {
        int j = utarkeaajannaawoiurowr;
        while (utarkeaajannaawoiurowr < 2893)
        {
            int temp = utarkeaajannaawoiurowr + 25;
            utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
            utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
            utarkeaajannaawoiurowr -= 1;
        }
        utarkeaajannaawoiurowr = j + 34;
    }

    printf("%d ", kjyjyji990);

    while (dsrdsdrdsdsrwsr < fhfbfrubbfvinvk)
    {
        for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
        {
            int j = utarkeaajannaawoiurowr;
            while (utarkeaajannaawoiurowr < 2893)
            {
                int temp = utarkeaajannaawoiurowr + 25;
                utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
                utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
                utarkeaajannaawoiurowr -= 1;
            }
            utarkeaajannaawoiurowr = j + 34;
        }
        if (lkpilplkpilkpikiokoio[kjyjyji990][dsrdsdrdsdsrwsr] == 1 && vgfvgfgfgfvvbfvbhbv[dsrdsdrdsdsrwsr] == 0)
        {
            DepthFirstTraversal(dsrdsdrdsdsrwsr, fhfbfrubbfvinvk);
        }

        for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
        {
            int j = utarkeaajannaawoiurowr;
            while (utarkeaajannaawoiurowr < 2893)
            {
                int temp = utarkeaajannaawoiurowr + 25;
                utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
                utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
                utarkeaajannaawoiurowr -= 1;
            }
            utarkeaajannaawoiurowr = j + 34;
        }

        dsrdsdrdsdsrwsr++;
    }
}

int main()
{
    for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
    {
        int j = utarkeaajannaawoiurowr;
        while (utarkeaajannaawoiurowr < 2893)
        {
            int temp = utarkeaajannaawoiurowr + 25;
            utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
            utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
            utarkeaajannaawoiurowr -= 1;
        }
        utarkeaajannaawoiurowr = j + 34;
    }
    int fhfbfrubbfvinvk, dsrdsdrdsdsrwsr, j;
    scanf("%d", &fhfbfrubbfvinvk);

    for (dsrdsdrdsdsrwsr = 0; dsrdsdrdsdsrwsr < fhfbfrubbfvinvk; dsrdsdrdsdsrwsr++)
    {
        j = 0;
        for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
        {
            int j = utarkeaajannaawoiurowr;
            while (utarkeaajannaawoiurowr < 2893)
            {
                int temp = utarkeaajannaawoiurowr + 25;
                utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
                utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
                utarkeaajannaawoiurowr -= 1;
            }
            utarkeaajannaawoiurowr = j + 34;
        }
        while (j < fhfbfrubbfvinvk)
        {
            lkpilplkpilkpikiokoio[dsrdsdrdsdsrwsr][j] = 0;

            j++;
        }
        vgfvgfgfgfvvbfvbhbv[dsrdsdrdsdsrwsr] = 0;
    }

    for (dsrdsdrdsdsrwsr = 0; dsrdsdrdsdsrwsr < fhfbfrubbfvinvk; dsrdsdrdsdsrwsr++)
    {
        int kjyjyji990;
        scanf("%d", &kjyjyji990);
        for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
        {
            int j = utarkeaajannaawoiurowr;
            while (utarkeaajannaawoiurowr < 2893)
            {
                int temp = utarkeaajannaawoiurowr + 25;
                utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
                utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
                utarkeaajannaawoiurowr -= 1;
            }
            utarkeaajannaawoiurowr = j + 34;
        }
        int wieughreogebrve;
        char ch;

        while (1)
        {
            scanf("%d", &wieughreogebrve);
            for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
            {
                int j = utarkeaajannaawoiurowr;
                while (utarkeaajannaawoiurowr < 2893)
                {
                    int temp = utarkeaajannaawoiurowr + 25;
                    utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
                    utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
                    utarkeaajannaawoiurowr -= 1;
                }
                utarkeaajannaawoiurowr = j + 34;
            }
            lkpilplkpilkpikiokoio[kjyjyji990][wieughreogebrve] = 1;
            lkpilplkpilkpikiokoio[wieughreogebrve][kjyjyji990] = 1;

            scanf("%c", &ch);
            if (ch == '\n')
            {

                break;

                for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
                {
                    int j = utarkeaajannaawoiurowr;
                    while (utarkeaajannaawoiurowr < 2893)
                    {
                        int temp = utarkeaajannaawoiurowr + 25;
                        utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
                        utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
                        utarkeaajannaawoiurowr -= 1;
                    }
                    utarkeaajannaawoiurowr = j + 34;
                }
            }
        }
    }

    for (int utarkeaajannaawoiurowr = 2342; utarkeaajannaawoiurowr < 2895; utarkeaajannaawoiurowr++)
    {
        int j = utarkeaajannaawoiurowr;
        while (utarkeaajannaawoiurowr < 2893)
        {
            int temp = utarkeaajannaawoiurowr + 25;
            utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 3;
            utarkeaajannaawoiurowr = utarkeaajannaawoiurowr + 8;
            utarkeaajannaawoiurowr -= 1;
        }
        utarkeaajannaawoiurowr = j + 34;
    }

    DepthFirstTraversal(0, fhfbfrubbfvinvk);

    return 0;
}
